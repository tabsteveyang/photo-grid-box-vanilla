!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var o in i)("object"==typeof exports?exports:e)[o]=i[o]}}(self,(function(){return function(){"use strict";var e={d:function(t,i){for(var o in i)e.o(i,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:i[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function i(e,t,i,o,n){this.insertPoint=e,this.imgLoader=new Image,this.dom=null,this.imgs=[],this.rowHeight=this._getRowHeight(),this.rowGap=o||3,this.colGap=n||3,this.rowLength=0,this.showUnCompeleteRow=!1,this.compeleteIndex=-1,this.lastRenderedWindowOffsetWidth=window.innerWidth,this.minImgWidth=this._getMinImgWidth(),this._initDOM(),i&&this.setImgOnClick(i),t&&this.appendImgs(t)}e.r(t),e.d(t,{PhotoGridBox:function(){return o}}),i.prototype._initDOM=function(){try{var e="photo-grid-box-"+ +new Date,t="photo-grid-box "+e;this.insertPoint.innerHTML='<div class="'+t+'"></div>',this.dom=document.querySelector("."+e),this.dom.style.width=this.dom.offsetWidth+"px"}catch(e){console.error(e)}},i.prototype._getRowHeight=function(){return window.innerWidth<=350?200:window.innerWidth<=550?250:window.innerWidth<=768?270:280},i.prototype._getMinImgWidth=function(){return window.innerWidth<=350?130:window.innerWidth<=550?150:window.innerWidth<=768?180:200},i.prototype.appendImgs=function(e){if(Array.isArray(e)&&e.length>0){var t=this;e.map((function(e,i){t.imgs.push(e)})),this._render()}else console.error("imgs should be an array with the elements of the src of the images(String).")},i.prototype._render=function(){var e=this;e.dom||e._initDOM(),e._addWindowResizeEvent();var t=document.querySelectorAll(".photo-block"),i=e.compeleteIndex+1,o=e.imgs.length,n=e.imgLoader,r=[],s=0;function h(i,o){if(function(e){t[e]&&t[e].remove()}(i),i!==o){var r=e.imgs[i];n.src=r}else s&&((e.showUnCompeleteRow||0===e.rowLength)&&d(!0),l())}function d(t){var i=0;t?i+=1:e.rowLength+=1,i+=e.rowLength;var o=e.rowHeight*i+e.rowGap*(i-1);e.dom.style.height=parseFloat(o)+"px",r.map((function(i){e.dom.append(i),t||(e.compeleteIndex+=1)}))}function l(){r=[],s=0}n.onload=function(){var t,n,p,c,a=(t=this.width,n=this.height,p=e.rowHeight/n,(c=Math.round(t*p))<e.minImgWidth+100&&(c=e.minImgWidth),c),m=a+e.colGap,f=function(t,i,o,n){var r=document.createElement("div"),h=e.rowGap*n,d=e.rowHeight*n+h,l=s;return r.style.backgroundImage="url("+t+")",r.className="photo-block",r.style.width=i+"px",r.style.height=o+"px",r.style.top=d+"px",r.style.left=l+"px",e.imgOnClick&&(r.onclick=e.imgOnClick,r.className+=" photo-block--clickable"),r.innerHTML='<div class="photo-block__panel"></div>',r}(this.src,a,e.rowHeight,e.rowLength),u=e.minImgWidth;!function(e,t){s+=t,r.push(e)}(f,m),s+u>=e.dom.offsetWidth&&(function(){for(var t=e.dom.offsetWidth-(s-e.colGap),i=[],o=0;o<r.length;o++)if(t>0)i.push(o);else{var n=r[o];parseFloat(n.style.width.replace("px",""))>e.minImgWidth&&i.push(o)}var h=t/i.length,d=0;for(o=0;o<r.length;o++){n=r[o];var l=parseFloat(n.style.width.replace("px",""));i.includes(o)&&(l+=h,n.style.width=l+"px"),n.style.left=d+"px",d+=l+e.colGap}}(),d(),l()),h(++i,o)},n.onerror=function(e){h(++i,o)},h(i,o)},i.prototype.setImgOnClick=function(e){this.imgOnClick=function(t){e&&e(t)}},i.prototype.setShowUnCompleteRow=function(e){"boolean"==typeof e&&(this.showUnCompeleteRow=e)},i.prototype._resize=function(e){this.rowLength=0,this.rowHeight=this._getRowHeight(),this.minImgWidth=this._getMinImgWidth(),this.compeleteIndex=-1,e.dom.style.width=null,this._render()},i.prototype._addWindowResizeEvent=function(){if(!this.isResizeEventAdded){var e,t=this;this._resizeEvent=function(){clearTimeout(e),e=setTimeout((function(){t.lastRenderedWindowOffsetWidth!==window.innerWidth&&(t._resize(t),t.lastRenderedWindowOffsetWidth=window.innerWidth)}),300)},window.addEventListener("resize",this._resizeEvent),this.isResizeEventAdded=!0}},i.prototype._removeWindowResizeEvent=function(){window.removeEventListener("resize",this._resizeEvent),this.isResizeEventAdded=!1},i.prototype.destroy=function(){this._removeWindowResizeEvent(),this.rowLength=0,this.compeleteIndex=-1,this.dom.remove(),this.dom=null,this.imgs=[]};var o=i;return t}()}));